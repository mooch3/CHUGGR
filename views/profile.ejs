<%- include('partials/header'); -%>

<% userProfile.forEach(doc => { %>
<div>
  <table class="profile-data">
    <tr>
      <th style="border-radius: 15px 0 0 0;">
        <img id="placeholder" src="/images/CHUGGRLogo.png" alt="">
      </th>

      <th>Following <strong><%=doc.data().numFriends%></strong> Friends </th>
      <th style="width: 250px; border-radius: 0 15px 0 0">
        <%=doc.data().drinksGiven.beers%> 🍺 <%=doc.data().drinksGiven.shots%> 🥃 Given
      </th>
    </tr>

    <tr>
      <td>
        <h1 style="color: #151E3F;"><%= doc.data().userName %></h1>
      </td>
      <td><%=doc.data().numBets%> Bets Made</td>
      <td><%=doc.data().drinksReceived.beers%> 🍺 <%=doc.data().drinksReceived.shots%> 🥃 Received</td>
    </tr>
    <tr>
      <td>
        <h2 style="color: gray; font-size: 3rem"> <%= doc.data().firstName %> <%=doc.data().lastName%> </h2>
      </td>
      <td><%=doc.data().betsWon%> Bets Won</td>
      <td><%=doc.data().drinksOutstanding.beers%>🍺<%=doc.data().drinksOutstanding.shots%>🥃 Outstanding</td>
    </tr>
    <tr>
      <td style="border-radius: 0 0 0 15px; font-family: 'Sansita Swashed'"><%=doc.data().bio %></td>
      <td> <%=doc.data().betsLost%> Bets Lost</td>
      <td style="border-radius: 0 0 15px 0"></td>
    </tr>
  </table>
</div>
<%});%>
  <h1 class="pastbets-title">Past Bets</h1>
<div class="pastbets-grid">
  <% pastBets.forEach(bet => {%>
    <div>
    <% if (bet.data().isFinished === true) {%>
      <%if (bet.data().type === "spread"){%>
        <p>Spread</p>
        <p><%=bet.data().line%></p>
      <%} else if (bet.data().type === "event"){%>
        <p>Event</p>
        <br>
        <br>
      <%} else if (bet.data().type === "moneyline"){%>
        <p>Money Line</p>
        <br>
        <br>
      <%}%>
      <% if (bet.data().title.length > 20){%>
        <p><%=bet.data().title.substring(0, 20) + "..."%></p>
      <%} else {%>
        <p><%=bet.data().title%></p>
      <%}%>
      <%if (bet.data().winner === "one" && bet.data().side1Users.hasOwnProperty(currentUser)){%>
        <a href="/hub/bets/<%=bet.data().betID%>">Won</a>
        <br>
        <br>
        <p><%=bet.data().stake.beers%>🍺 <%=bet.data().stake.shots%>🥃 Given </p>
      <%} else if (bet.data().winner === "two" && bet.data().side2Users.hasOwnProperty(currentUser)){%>
        <a href="/hub/bets/<%=bet.data().betID%>">Won</a>
        <br>
        <br>
        <p><%=bet.data().stake.beers%>🍺 <%=bet.data().stake.shots%>🥃 Given </p>
      <%} else {%>
        <a href="/hub/bets/<%=bet.data().betID%>">Lost</a>
        <br>
        <br>
        <p><%=bet.data().stake.beers%>🍺 <%=bet.data().stake.shots%>🥃 Received</p>
      <%}%>
      <%}%>
      </div>
    <%});%>
</div>

<script src="/scripts/firebasehelper.js"></script>
<%- include('partials/footer'); -%>
