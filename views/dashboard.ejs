<%- include('partials/header'); -%>
<div class="pending-bets" id="pendingBets">

</div>

<h1>My Bets</h1>

<input type="hidden" id="currentUser" value=<%=currentUser%>>
  <% docs.forEach(item => { %>
    <div>
    <table class="bet-card">
    <tr>
      <td style="border-radius: 15px 0 0 0"><strong><%= item.data().title%></strong> </td>
      <td><%=item.data().type%></td>
      <td style="border-radius: 0 15px 0 0">Stake: <%=item.data().stake.beers%>🍺 <%= item.data().stake.shots%>🥃</td>
    </tr>
    <tr>
      <td class="participant"><%=item.data().team1 + ": "%> <i><%=Object.values(item.data().side1Users).join(', ')%></i> </td>
      <% const dueDate = new Date(item.data().dueDate*1000)%>
      <td>Due Date: <%=(dueDate.getMonth()+1) + "/" + dueDate.getDate() + "/" + dueDate.getFullYear()%> </td>
      <td></td>
    </tr>
    <tr>
      <td class="participant" style="border-radius: 0 0 0 15px"><%=item.data().team2 + ": "%> <i><%=Object.values(item.data().side2Users).join(', ')%></i></td>
      <% if(item.data().dueDate*1000 < Date.now() && item.data().isFinished == false){ %>
          <td style="color: red">Over Due</td>
      <%} else if (item.data().isFinished == false){%>
        <td style="color: green">Pending</td>
      <%} else if (item.data().isFinished == true && item.data().outstandingUsers.includes(currentUser)){%>
        <td style="color: #ff9933">You Owe Drinks</td>
      <%} else if (item.data().isFinished == true && !item.data().outstandingUsers.includes(currentUser)){%>
        <td style="color: #005A9C">Closed</td>
      <%};%>

      <td style="border-radius: 0 0 15px 0"><a href="/bets/<%=item.data().betID%>" style="color: #983728">Details > </a></td>
    </tr>
  </table>

  </div>
<%});%>
<script src="scripts/pendingBetsNotif.js"></script>
<script src="scripts/DashboardCleanUp.js"></script>

<%-include('partials/footer'); -%>
